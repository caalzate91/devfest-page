---
import { type CollectionEntry, getCollection } from 'astro:content'
import AgendaItem from './AgendaItem.astro'

interface Props {
  talk: CollectionEntry<'talks'>
}
const { talk } = Astro.props

const allSponsors = await getCollection('sponsors')
const sponsors = talk.data?.sponsors
  ? allSponsors.filter((s) => talk.data.sponsors?.includes(s.id))
  : null
---

<AgendaItem talk={talk}>
  <div class="flex flex-row items-center justify-between flex-1 gap-2">
    <h4 class="font-bold text-lg m-0">{talk.data.title}</h4>

    <div class="text-gray-500 font-mono text-sm">
      {
        sponsors?.map((sponsor) => (
          <div class="flex flex-row content-center align-middle gap-5">
            <span class="align-middle content-center">{sponsor.data.name}</span>
            <img
              src={`/assets/images/sponsors/${sponsor.data.image}`}
              alt=""
              class="w-16"
            />
          </div>
        ))
      }
    </div>
  </div>
</AgendaItem>
