---
import { getCollection } from "astro:content";

export async function getStaticPaths() {
  const agendas = await getCollection("talks");
  return agendas.map((agenda) => ({
    params: { day: agenda.id },
    props: { agenda },
  }));
}

import Layout from "../layouts/Layout.astro";

// import DevFestIntroSection from "../components/Sections/DevFestIntroSection.astro";
// import OrganizersSection from "../components/Sections/OrganizersSection.astro";
// import SpeakersSection from "../components/Sections/SpeakersSection.astro";
// import SponsorsSection from "../components/Sections/SponsorsSection.astro";
// import AgendaSection from "../components/Sections/AgendaSection.astro";

import About from "@components/Sections/About.astro";
import Agenda from "@components/Sections/Agenda.astro";
import Sponsors from "@components/Sections/Sponsors.astro";
import Comunities from "@components/Sections/Comunities.astro";
import Organizers from "@components/Sections/Organizers.astro";
import Footer from "@components/Sections/Footer.astro";
import Hero from "@components/Sections/Hero.astro";

const organizers = await getCollection("organizers", ({ data }) => {
  return !data.hidden;
});
const communitySponsors = await getCollection("sponsors", ({ data }) => {
  return !data.hidden && data.type === "community";
});
const companySponsors = await getCollection("sponsors", ({ data }) => {
  return !data.hidden && data.type === "company";
});
const speakers = await getCollection("speakers", ({ data }) => {
  return !data.hidden;
});

const { agenda } = Astro.props;
---

<Layout title="DataDev Fest 2025">
  <main class="flex flex-col w-full overflow-hidden">
    <Hero />
    <About />
    <Agenda agenda={agenda} />
    <Sponsors sponsors={companySponsors} />
    <Comunities communities={communitySponsors} />
    <Organizers organizers={organizers} />
    <Footer />
  </main>
</Layout>
